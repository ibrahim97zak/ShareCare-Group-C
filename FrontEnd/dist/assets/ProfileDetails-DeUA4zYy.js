const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ActiveTab-BoIqQ3e_.js","assets/index-BMzkFxf0.js","assets/index-DJfmkHgz.css","assets/NotificationsTab-CP2bgIOH.js","assets/ChartsTab-BALFpYZD.js","assets/UserPanelController-xat99QAX.js"])))=>i.map(i=>d[i]);
import{j as t,r as i,_ as d,b as h,d as m,a as l}from"./index-BMzkFxf0.js";const x=({user:e})=>t.jsxs("div",{className:"flex flex-wrap items-center bg-white p-6 rounded-lg shadow-md mb-6",children:[t.jsx("img",{src:e.profilePicture,alt:"Profile",className:"w-24 h-24 rounded-full mr-4 md:w-20 md:h-20 sm:w-16 sm:h-16"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-xl font-bold",children:e.name}),t.jsx("p",{className:"text-gray-600",children:e.email}),t.jsx("p",{className:"text-gray-500",children:e.accountType})]})]}),p=(e,a)=>({labels:Object.keys(e),datasets:[{label:a==="Donor"?"Offers":a==="Beneficiary"?"Requests":"Offers & Requests",data:Object.values(e),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]}),j=i.lazy(()=>d(()=>import("./ActiveTab-BoIqQ3e_.js"),__vite__mapDeps([0,1,2]))),_=i.lazy(()=>d(()=>import("./NotificationsTab-CP2bgIOH.js"),__vite__mapDeps([3,1,2]))),y=i.lazy(()=>d(()=>import("./ChartsTab-BALFpYZD.js"),__vite__mapDeps([4,1,2]))),v=i.lazy(()=>d(()=>import("./UserPanelController-xat99QAX.js"),__vite__mapDeps([5,1,2]))),D=()=>{const{user:e}=h(),[a,n]=i.useState("active"),[o,c]=i.useState([]),b=o.reduce((r,s)=>{const{donationType:g,quantity:u}=s;return r[g]=r[g]?r[g]+u:u,r},{}),f=async r=>{try{await l.delete(`/api/donations/${r}`),c(o.filter(s=>s.id!==r))}catch(s){console.error("Error deleting item:",s)}};return i.useEffect(()=>{async function r(){try{let s;e.role==="Donor"?(s=await l.get(`/api/donations/${e._id}/offers`),c(s.data.donationOffers)):e.role==="Admin"?(s=await l.get("$/api/donations/"),c(s.data)):(s=await l.get(`/api/donations/${e._id}/requests`),c(s.data.donationRequests))}catch(s){console.log(s)}}r()},[e]),e?t.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen mt-7",children:[t.jsx(x,{user:e}),t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[t.jsxs("button",{onClick:()=>n("active"),className:`px-4 py-2 rounded ${a==="active"?"bg-green-500 text-white":"bg-gray-200"}`,children:["Active ",e.role==="Donor"?"Offers":e.role==="Beneficiary"?"Requests":"Offers & Requests"]}),t.jsx("button",{onClick:()=>n("notifications"),className:`px-4 py-2 rounded ${a==="notifications"?"bg-green-500 text-white":"bg-gray-200"}`,children:"Notifications"}),t.jsx("button",{onClick:()=>n("charts"),className:`px-4 py-2 rounded ${a==="charts"?"bg-green-500 text-white":"bg-gray-200"}`,children:"Charts"}),t.jsx("button",{onClick:()=>n("users"),className:`px-4 py-2 rounded ${a==="users"?"bg-green-500 text-white":"bg-gray-200"}`,children:"Users"})]}),t.jsxs(i.Suspense,{fallback:t.jsx(m,{}),children:[a==="active"&&t.jsx(j,{user:e,activeItems:o,handleDelete:f}),a==="notifications"&&t.jsx(_,{userId:e._id}),a==="charts"&&t.jsx(y,{chartData:p(b,e.role),role:e.role,items:o}),a==="users"&&(e.role==="Admin"?t.jsx(v,{}):t.jsx("div",{children:"You do not have permission to access this page."}))]})]})]}):t.jsx("div",{children:"Loading..."})};export{D as default};

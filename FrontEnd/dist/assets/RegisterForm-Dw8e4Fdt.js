import{u as v,r as c,j as e,L as b}from"./index-Hx5Tglyh.js";import{J as n,I as l}from"./joi-browser.min-D-fWwhtr.js";import{P as h}from"./PasswordInput-QjHWyXlW.js";import{L as y}from"./LocationSelect-OgCfyl2_.js";import{a as N}from"./axios-CCb-kr4I.js";import{S as j}from"./sweetalert2.esm.all-BkU8I-GU.js";import"./iconBase-DfXLulqb.js";const w=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,q=m=>n.object({userName:n.string().min(3).max(30).required().messages({"string.empty":"Username is required","string.min":"Username must be at least 3 characters long","string.max":"Username cannot exceed 30 characters"}),name:n.string().min(2).max(50).required().messages({"string.empty":"Name is required","string.min":"Name must be at least 2 characters long","string.max":"Name cannot exceed 50 characters"}),email:n.string().pattern(w).required().messages({"string.empty":"Email is required","string.pattern.base":"Please enter a valid email"}),password:n.string().min(6).required().messages({"string.empty":"Password is required","string.min":"Password must be at least 6 characters long"}),confirmPassword:n.any().valid(n.ref("password")).required().messages({"any.only":"Passwords do not match","any.required":"Confirm password is required"}),location:n.string().required().messages({"string.empty":"Location is required"}),role:n.string().valid("Donor","Beneficiary").required().messages({"string.empty":"User type is required","string.invalid":"Invalid user type"}),phone:n.string().pattern(/^(\+?1-?)?(\(?\d{3}\)?)?(-|\s)?(\d{3})(-|\s)?(\d{4})$/).required().messages({"string.empty":"Phone number is required","string.pattern.base":"Please enter a valid phone number"}),gender:n.string().required().messages({"string.empty":"Gender is required"})}).validate(m,{abortEarly:!1}),P="/assets/SAHEM-logo-CKiCCrRA.png",C="http://localhost:5000",D=()=>{const m=v(),[s,t]=c.useState({name:"",userName:"",email:"",password:"",confirmPassword:"",location:"",role:"",phone:"",gender:""}),[d,p]=c.useState(null),[a,x]=c.useState({name:"",userName:"",email:"",password:"",confirmPassword:"",location:"",role:"",phone:"",gender:""}),f=async r=>{r.preventDefault();const g={...s},{error:u}=q(g);if(u){const o={};u.details.forEach(i=>{o[i.path[0]]=i.message}),x(o);return}x({}),p(null);try{const i=(await N.post(`${C}/api/auth/register`,g)).data;j.fire({title:"Registration Successful!",text:"Please check your email to verify your account.",icon:"success",confirmButtonText:"OK"}).then(()=>{m("/")}),console.log("Form submitted successfully",i)}catch(o){let i="An unexpected error occurred.";o.response?(console.error("Error submitting form:",o.response.data.message),i=o.response.data.message):(console.error("Error submitting form:",o.message),i=o.message),p(i),j.fire({title:"Error",text:i,icon:"error",confirmButtonText:"Try Again"})}};return e.jsx("div",{className:"flex items-center justify-center mt-10",children:e.jsxs("div",{className:"w-96 border rounded bg-white px-7 py-10",children:[e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"flex items-center justify-center mb-1",children:[e.jsx("h4",{className:"text-2xl",children:"Sign Up to"}),e.jsx("img",{src:P,alt:"SAHEM logo",className:"w-20 h-20 object-contain ml-2"})]}),e.jsx(l,{type:"text",placeholder:"Name",value:s.name,onChange:r=>t({...s,name:r.target.value})}),a.name&&e.jsx("p",{className:"text-red-600 text-xs pb-1",children:a.name}),e.jsx(l,{type:"text",placeholder:"Username",value:s.userName,onChange:r=>t({...s,userName:r.target.value})}),a.userName&&e.jsx("p",{className:"text-red-600 text-xs pb-1",children:a.userName}),e.jsx(l,{type:"email",placeholder:"Email",value:s.email,onChange:r=>t({...s,email:r.target.value})}),a.email&&e.jsx("p",{className:"text-red-600 text-xs pb-1",children:a.email}),e.jsx(l,{type:"tel",placeholder:"Phone Number",value:s.phone,onChange:r=>t({...s,phone:r.target.value})}),a.phone&&e.jsx("p",{className:"text-red-600 text-xs pb-1",children:a.phone}),e.jsx(h,{value:s.password,onChange:r=>t({...s,password:r.target.value})}),a.password&&e.jsx("p",{className:"text-red-600 text-xs pb-1",children:a.password}),e.jsx(h,{placeholder:"Confirm Password",value:s.confirmPassword,onChange:r=>t({...s,confirmPassword:r.target.value})}),a.confirmPassword&&e.jsx("p",{className:"text-red-600 text-xs pb-1",children:a.confirmPassword}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender:"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"gender",value:"Male",checked:s.gender==="Male",onChange:r=>t({...s,gender:r.target.value})}),e.jsx("span",{className:"ml-2",children:"Male"})]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"gender",value:"Female",checked:s.gender==="Female",onChange:r=>t({...s,gender:r.target.value})}),e.jsx("span",{className:"ml-2",children:"Female"})]})]})]}),a.gender&&e.jsx("p",{className:"text-red-600 text-xs pb-1",children:a.gender}),e.jsx(y,{value:s.location,onChange:r=>t({...s,location:r.target.value})}),a.location&&e.jsx("p",{className:"text-red-600 text-xs pb-1",children:a.location}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Type:"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"role",value:"Donor",checked:s.role==="Donor",onChange:r=>t({...s,role:r.target.value})}),e.jsx("span",{className:"ml-2",children:"Donor"})]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"role",value:"Beneficiary",checked:s.role==="Beneficiary",onChange:r=>t({...s,role:r.target.value})}),e.jsx("span",{className:"ml-2",children:"Beneficiary"})]})]})]}),a.role&&e.jsx("p",{className:"text-red-600 text-xs pb-1",children:a.role}),d&&e.jsx("p",{className:"text-red-600 text-xs pb-1",children:d}),e.jsx("button",{type:"submit",className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded w-full",children:"Sign Up"})]}),e.jsxs("p",{className:"text-center text-sm mt-2",children:["Already have an account?"," ",e.jsx(b,{to:"/login",className:"text-green-500 hover:text-green-700",children:"Log In"})]})]})})};export{C as ApiUrl,D as default};
